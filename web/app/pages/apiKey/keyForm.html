<form role="form">
  <!-- messages -->
  <div data-ng-show="message" class="alert {{ messageClass }}" role="alert">{{ message }}</div>

	<!-- Key -->
	<fieldset disabled>
		<div class="form-group">
			<label for="index" class="control-label">ID</label>
			<input type="text" class="form-control" id="index" placeholder="API Key" data-ng-model="api.api_key">
			<span class="help-block">The API key is automatically generated.</span>
		</div>
	</fieldset>

	<!-- Name -->
	<div class="form-group">
		<label for="name">Name</label>
		<input type="text" class="form-control" id="name" placeholder="Enter Name" data-ng-model="api.name">
	</div>

  <!-- Groups -->
  <div class="form-group">
    <label>Group</label>
    <table class="table table-hover">
      <tr>
        <td>
          <input type="text" class="form-control" id="addGroup" placeholder="Enter Name" data-ng-model="groupName">
        </td>
        <td>
          <button type="button" class="btn btn-info" data-ng-click="addGroup(groupName)">
            <span class="fa fa-plus" aria-hidden="true"></span> Add group
          </button>
        </td>
      </tr>
    </table>

    <div data-ng-repeat="group in api.configuration.groups">
      <table class="table table-hover">
        <thead>
          <tr>
            <td>GroupID</td>
            <td>Actions</td>
            <td>Locations</td>
          </tr>
        </thead>
        <tr>
          <td>{{ group.id }}</td>
          <td>
            <button type="button" class="btn btn-danger btn-s" data-ng-click="removeGroup(group.id)">
              <span class="fa fa-minus" aria-hidden="true"></span> Remove group
            </button>
          </td>
          <td>
            <div>
              <button data-ng-show="!showAddLocation" type="button" class="btn btn-success" data-ng-click="showAddLocation = !showAddLocation">
                <span class="fa fa-wrench" aria-hidden="true"></span> Locations
              </button>
              <button data-ng-show="showAddLocation" type="button" class="btn btn-success inline" data-ng-click="showAddLocation = !showAddLocation">
                <span class="fa fa-minus"></span>
              </button>
              <input data-ng-show="showAddLocation" type="text" class="form-control inline" placeholder="Search locations..." data-ng-model="filterLocation">
              <ul class="max-height-list" data-ng-if="showAddLocation">
                <li data-ng-repeat="locationName in availableLocations | filter: filterLocation" data-ng-if="group.locations.indexOf(locationName) === -1">
                  <a data-ng-click="addLocationToGroup(group.id, locationName)">{{ locationName }}</a>
                </li>
              </ul>
            </div>
          </td>
        </tr>
        <tr data-ng-repeat="location in group.locations" data-ng-if="showAddLocation">
          <td></td>
          <td>
            {{ location }}
          </td>
          <td>
            <button type="button" class="btn btn-danger btn-xs" data-ng-click="removeLocationFromGroup(group.id, location)">
              <span class="fa fa-minus" aria-hidden="true"></span> Remove location
            </button>
          </td>
        </tr>
      </table>
    </div>
  </div>
</form>
